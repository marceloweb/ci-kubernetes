node {

  try {
      environment {
        GOOGLE_APPLICATION_CREDENTIALS = credentials('gcp_credential')
      }
      stage('Preparation') {
        checkout scm
      }

      stage('Creating cluster') {
        sh "./misc/scripts/createCluster.sh ${env.GOOGLE_APPLICATION_CREDENTIALS}"
      }
    } catch(e) {

       println "FAILED: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]' ${env.BUILD_URL}"

    throw e;
   }                                     
}                                          
